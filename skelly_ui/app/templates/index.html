{% extends 'base.html' %}{% block body %}<div class="panel"><h2>Now Playing</h2><div><strong>{{ state.current_title or '—' }}</strong></div><form method="post" action="/control" style="margin-top:8px"><button class="btn" name="action" value="prev">⏮ Prev</button>{% if state.playing %}<button class="btn" name="action" value="pause">⏸ Pause</button>{% else %}<button class="btn" name="action" value="play">▶️ Play</button>{% endif %}<button class="btn" name="action" value="next">⏭ Next</button><button class="btn" name="action" value="stop">⏹ Stop</button><label style="margin-left:12px">Vol<input type="range" name="volume" min="0" max="100" value="{{ state.volume }}" oninput="this.form.submit()"></label></form><div class="badge" style="margin-top:6px">Queue length: {{ state.queue_len }} • {{ 'Playing' if state.playing else 'Stopped/Paused' }}</div></div><div class="panel"><h2>Upload</h2><form method="post" action="/upload" enctype="multipart/form-data"><input type="file" name="files" multiple accept=".mp3,.wav,.flac,.m4a,.aac,.ogg"><div style="margin-top:8px"><button class="btn" type="submit">Upload</button></div></form><p class="badge">Files are stored under <code>music/</code>.</p></div><div class="panel"><h2>Library</h2><div class="list">{% for f in library %}<div class="item"><div style="flex:1">{{ f['name'] }}</div><form method="post" action="/queue/add"><input type="hidden" name="path" value="{{ f['relpath'] }}"><button class="btn">Add</button></form></div>{% endfor %}{% if not library %}<div class="badge">No files yet — upload some music.</div>{% endif %}</div></div><div class="panel"><h2>Queue</h2><div class="list">{% for i, q in enumerate(queue) %}<div class="item"><div style="width:28px;text-align:center">{{ i+1 }}</div><div style="flex:1">{{ q['name'] }}</div><form method="post" action="/queue/move"><input type="hidden" name="index" value="{{ i }}"><button class="btn" name="dir" value="up">↑</button><button class="btn" name="dir" value="down">↓</button></form><form method="post" action="/queue/remove"><input type="hidden" name="index" value="{{ i }}"><button class="btn">✖</button></form></div>{% endfor %}{% if not queue %}<div class="badge">Queue is empty.</div>{% endif %}</div><form method="post" action="/queue/clear" style="margin-top:8px"><button class="btn">Clear</button><button class="btn" formaction="/queue/save">Save</button><button class="btn" formaction="/queue/load">Load</button></form></div>{% endblock %}